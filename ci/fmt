#!/usr/bin/env bash
# Format code with rustfmt

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
ROOT_DIR="$(dirname "$SCRIPT_DIR")"

cd "$ROOT_DIR"

if [[ "${1:-}" == "--check" ]]; then
    echo "Checking formatting..."
    cargo fmt --all -- --check
else
    echo "Formatting code..."
    cargo fmt --all
fi
